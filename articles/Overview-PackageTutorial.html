<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PackageTutorial • finnsurveytext</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="PackageTutorial">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">finnsurveytext</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/web_only/InDetail1-DataPreparation.html">InDetail1-DataPreparation</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/InDetail2-DataExploration.html">InDetail2-DataExploration</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/InDetail3-ConceptNetworkOverview.html">InDetail3-ConceptNetworkOverview</a></li>
    <li><a class="dropdown-item" href="../articles/Overview-PackageTutorial.html">PackageTutorial</a></li>
    <li><a class="dropdown-item" href="../articles/ReadMe.html">ReadMe</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>PackageTutorial</h1>
            
      

      <div class="d-none name"><code>Overview-PackageTutorial.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview-of-finnsurveytext">Overview of finnsurveytext<a class="anchor" aria-label="anchor" href="#overview-of-finnsurveytext"></a>
</h2>
<p>This tutorial aims to provide a simple overview of what is included
within the <code>finnsurveytext</code> package and teach you how to use
the main functions included in the package.</p>
<p>The below table shows you all the functions that are included in the
package. The functions which are <strong>bolded</strong> are the main
functions which are outlined in the sections below.</p>
<table class="table">
<colgroup>
<col width="45%">
<col width="27%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th align="center">Section</th>
<th>Usage</th>
<th>Functions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><strong>1. Data Preparation</strong></td>
<td>use the <code>udpipe</code> <code>R</code> package to clean and
annotate the raw data into a standardised format (CoNLL-U) suitable for
analysis.</td>
<td>fst_format()<br>fst_find_stopwords()<br>fst_rm_stop_punct()<br><strong>fst_prepare()</strong><br><strong>fst_prepare_svydesign()</strong>
</td>
</tr>
<tr class="even">
<td align="center"><strong>2. Data Exploration</strong></td>
<td>create wordclouds, n-gram tables and summary tables for initial
insights into trends across responses.</td>
<td>fst_summarise_short()<br><strong>fst_summarise()</strong><br><strong>fst_pos()</strong><br><strong>fst_length_summary()</strong><br>fst_use_svydesign()<br>fst_freq_table<br>fst_ngrams_table()<br>fst_ngrams_table2()<br>fst_freq_plot()<br>fst_ngrams_plot()<br><strong>fst_freq()</strong><br><strong>fst_ngrams()</strong><br><strong>fst_wordcloud()</strong>
</td>
</tr>
<tr class="odd">
<td align="center"><strong>3. Concept Network</strong></td>
<td>creation of a concept network using the <code>textrank</code>
<code>R</code> package with node size indicating word importance
(PageRank) <br>and edge weight showing co-occurrence of words.</td>
<td>fst_cn_search()<br>fst_cn_edges()<br>fst_cn_nodes()<br>fst_cn_plot()<br><strong>fst_concept_network()</strong>
</td>
</tr>
<tr class="even">
<td align="center"><strong>4. Comparison Functions</strong></td>
<td>corresponding <strong>Data Exploration</strong> and <strong>Concept
Network</strong> functions allowing for comparison between groups of
survey respondents.</td>
<td>
<strong>fst_pos_compare()</strong><br><strong>fst_summarise_compare()</strong><br><strong>fst_length_compare()</strong><br>fst_get_unique_ngrams_separate()<br>fst_get_unique_ngrams()<br>fst_join_unique()<br>fst_ngrams_compare_plot()<br><strong>fst_freq_compare()</strong><br><strong>fst_ngrams_compare()</strong><br><strong>fst_comparison_cloud()</strong><br>fst_cn_get_unique_separate()<br>fst_cn_get_unique()<br>fst_cn_compare_plot()<br><strong>fst_concept_network_compare()</strong>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="install-and-load-package">0. Install and Load Package<a class="anchor" aria-label="anchor" href="#install-and-load-package"></a>
</h2>
<p>First, the <code>finnsurveytext</code> package needs to be installed
into your R environment and loaded into the environment.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dariah-fi-survey-concept-network.github.io/finnsurveytext/">finnsurveytext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: grid</span></span></code></pre>
<pre><code><span><span class="co">## Loading required package: Matrix</span></span></code></pre>
<pre><code><span><span class="co">## Loading required package: survival</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'survey'</span></span></code></pre>
<pre><code><span><span class="co">## The following object is masked from 'package:graphics':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     dotchart</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="data-preparation">1. Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>The data preparation functions are used to take your raw survey data
(in a dataframe or <em>svydesign</em> object within your R environment)
and convert it into a standardised format ready for analysis.</p>
<p>The functions in the remaining sections require your data to be
pre-formatted into this format.</p>
<p>(To learn move about the format we use, see the <a href="https://universaldependencies.org/format.html" class="external-link">Universal
Dependencies Project</a>.)</p>
<div class="section level4">
<h4 id="option-1-data-is-in-a-dataframe">Option 1: Data is in a dataframe<a class="anchor" aria-label="anchor" href="#option-1-data-is-in-a-dataframe"></a>
</h4>
<p>The package comes with sample data. For this demonstration, we use
<code>dev_coop</code>. The raw data looks like this:</p>
<table class="table">
<colgroup>
<col width="1%">
<col width="31%">
<col width="21%">
<col width="22%">
<col width="1%">
<col width="5%">
<col width="1%">
<col width="3%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="right">fsd_id</th>
<th align="left">q11_1</th>
<th align="left">q11_2</th>
<th align="left">q11_3</th>
<th align="right">paino</th>
<th align="left">region</th>
<th align="left">gender</th>
<th align="left">year_of_birth</th>
<th align="left">education_level</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">elämiseen tarvittavat perusasiat ovat kehittymättöneet
(esim. vesi, talo, ruoka). Ja niitä ei ole riittävästi</td>
<td align="left">varmaan koitetaan kehittää em</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="right">0.5440</td>
<td align="left">Muu Etelä-Suomi</td>
<td align="left">Female</td>
<td align="left">1992</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">on kurjuutta ja nälänhätää, asiat eivät ole vielä
kehittyneet, lapset eivät pääse kouluun, tytöillä on huonompi asema kuin
pojilla.</td>
<td align="left">pyritään auttamaan?</td>
<td align="left">ihmiskauppa, nälänhätä ja sodat/turvattomuus</td>
<td align="right">0.7171</td>
<td align="left">Pohjois- ja Itä-Suomi</td>
<td align="left">Female</td>
<td align="left">1994</td>
<td align="left">Matriculation examination</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">jokaisella ei ole turvattua toimeentuloa ja jossa
todella huomaa koulutuksen arvon.</td>
<td align="left">autetaan ja näytetään ihmisille tie parempaan
tulevaisuuteen heidän oman työnsä tuloksena.</td>
<td align="left">kouluttamattomuus, nälkä ja puhtaan veden puute.</td>
<td align="right">0.6240</td>
<td align="left">Helsinki-Uusima</td>
<td align="left">Female</td>
<td align="left">1994</td>
<td align="left">Matriculation examination</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">kehityksen taso ei ole yhtä korkea kuin kehittyneissä
maissa</td>
<td align="left">yleensä haitataan kehitysmaan kehittymistä</td>
<td align="left">öljy, raha, se fakta että ei olla vielä päästy asumaan
muualla kuin tällä yhdellä planeetalla</td>
<td align="right">0.3401</td>
<td align="left">Länsi-Suomi</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">asiat ovat vielä huonossa jamassa ja apua
tarvitaan</td>
<td align="left"></td>
<td align="left">eriarvoisuus, sodat, nälänhätä tietyissä maissa</td>
<td align="right">0.6240</td>
<td align="left">Helsinki-Uusima</td>
<td align="left">Female</td>
<td align="left">1993</td>
<td align="left">Upper secondary vocational qualification</td>
</tr>
</tbody>
</table>
<p>We will look at q11_3 (responses to ‘’Jatka lausetta: Maailman kolme
suurinta ongelmaa ovat… (Avokysymys)’) as our open-ended survey
question. We also want to include our survey weights (in ‘paino’ column)
and bring in the genders and regions so we can use these values to
compare groups.</p>
<p>The main function here is <code><a href="../reference/fst_prepare.html">fst_prepare()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># FUNCTION DEFINITION</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>fst_prepare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                        question,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                        id,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>                        <span class="at">model =</span> <span class="st">"ftb"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>                        <span class="at">stopword_list =</span> <span class="st">"nltk"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>                        <span class="at">add_cols =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>                        <span class="at">manual =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>                        <span class="at">manual_list =</span> <span class="st">""</span>)</span></code></pre></div>
<p>We can run the function as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fst_prepare.html">fst_prepare</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dev_coop</span>,</span>
<span>                  question <span class="op">=</span> <span class="st">'q11_3'</span>, </span>
<span>                  id <span class="op">=</span> <span class="st">'fsd_id'</span>, </span>
<span>                  weights <span class="op">=</span> <span class="st">'paino'</span>,</span>
<span>                  add_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'gender'</span>, <span class="st">'region'</span><span class="op">)</span></span>
<span>                  <span class="op">)</span></span></code></pre></div>
<p><strong>Summary of components</strong></p>
<ul>
<li>
<code>data</code> is the dataframe of interest. In this case, we are
using data that comes with the package called ‘dev_coop’.</li>
<li>The <code>question</code> is the name of the column in your data
which contains the open-ended survey question. In this example, we’re
considering ‘q11_3’</li>
<li>
<code>id</code> is the id column in our data, which is ‘fsd_id’</li>
<li>The function also requires a Finnish language model available for
<code>udpipe</code>, in this case we are using the default Finnish
Treebank, <code>model = "ftb"</code>. (There are two options for Finnish
langage model; the other option is the Turku Dependency Treebank
“tdt”.)</li>
<li>By default we will remove stopwords from the “nltk”
<code>stopword_list</code> in this example. (To find the relevant lists
of Finnish stopwords, you can run the <code><a href="../reference/fst_find_stopwords.html">fst_find_stopwords()</a></code>
function.) Punctuation is also removed from the data whenever stopwords
are removed.</li>
<li>Optionally, you can add a <code>weights</code> column in your
formatted data. Our weights are stored in the raw data as ‘paino’.</li>
<li>Optionally, you can add other columns to your formatted data (for
use in comparison functions). We include our ‘gender’ and ‘region’
columns for this reason</li>
<li>The results in CoNLL-U format are stored in the local environment as
<code>df</code>.</li>
<li>(<code>manual</code> and <code>manual_list</code> are used if you
want to provide your own list of stopwords to remove from the
data.)</li>
</ul>
<p>The formatted data looks like this:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="2%">
<col width="4%">
<col width="4%">
<col width="28%">
<col width="3%">
<col width="6%">
<col width="6%">
<col width="1%">
<col width="3%">
<col width="9%">
<col width="5%">
<col width="3%">
<col width="1%">
<col width="5%">
<col width="2%">
<col width="2%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">paragraph_id</th>
<th align="right">sentence_id</th>
<th align="left">sentence</th>
<th align="left">token_id</th>
<th align="left">token</th>
<th align="left">lemma</th>
<th align="left">upos</th>
<th align="left">xpos</th>
<th align="left">feats</th>
<th align="left">head_token_id</th>
<th align="left">dep_rel</th>
<th align="left">deps</th>
<th align="left">misc</th>
<th align="right">weight</th>
<th align="left">gender</th>
<th align="left">region</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">1</td>
<td align="left">saastuminen</td>
<td align="left">saastuminen</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">3</td>
<td align="left">luonnonvarojen</td>
<td align="left">luonnonvaro</td>
<td align="left">NOUN</td>
<td align="left">N,Pl,Gen</td>
<td align="left">Case=Gen|Number=Plur</td>
<td align="left">4</td>
<td align="left">nmod</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">4</td>
<td align="left">liikakäyttö</td>
<td align="left">liikakäyttö</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">1</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">6</td>
<td align="left">nälänhätä</td>
<td align="left">nälänhätä</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">1</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">8</td>
<td align="left">ylikansoittuminen</td>
<td align="left">ylikansoittuminen</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">1</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">SpacesAfter=</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="option-2-data-is-in-a-svydesign-object">Option 2: Data is in a <em>svydesign</em> object<a class="anchor" aria-label="anchor" href="#option-2-data-is-in-a-svydesign-object"></a>
</h4>
<p>The other option is to get your data from a <em>svydesign</em> object
from the <strong>survey</strong> package. The <strong>survey</strong>
package is a popular package used for analysising surveys.</p>
<p>The main function here is <code><a href="../reference/fst_prepare_svydesign.html">fst_prepare_svydesign()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># FUNCTION DEFINITION</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>fst_prepare_svydesign <span class="ot">&lt;-</span> <span class="cf">function</span>(svydesign,</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>                                  question,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                                  id,</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>                                  <span class="at">model =</span> <span class="st">"ftb"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>                                  <span class="at">stopword_list =</span> <span class="st">"nltk"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>                                  <span class="at">use_weights =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>                                  <span class="at">add_cols =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>                                  <span class="at">manual =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>                                  <span class="at">manual_list =</span> <span class="st">""</span>) </span></code></pre></div>
<p>We can run the function as follows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fst_prepare_svydesign.html">fst_prepare_svydesign</a></span><span class="op">(</span>svydesign <span class="op">=</span> <span class="va">svy_dev</span>,</span>
<span>                            question <span class="op">=</span> <span class="st">'q11_3'</span>, </span>
<span>                            id <span class="op">=</span> <span class="st">'fsd_id'</span>, </span>
<span>                            use_weights <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            add_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'gender'</span>, <span class="st">'region'</span><span class="op">)</span></span>
<span>                            <span class="op">)</span></span></code></pre></div>
<p><strong>The only differences between the previous function and this
one are:</strong></p>
<ul>
<li>
<code>svydesign</code> is you <em>svydesign</em> object. In this
case, we have one called ‘svy_dev’</li>
<li>The <em>svydesign</em> object has a component called ‘prob’ which
contains the inverse of the weights. Therefore, we use these by setting
<code>use_weights = TRUE</code>
</li>
</ul>
<p>The formatted data looks like this (should look very similar to the
above formatted data!):</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="2%">
<col width="4%">
<col width="4%">
<col width="28%">
<col width="3%">
<col width="6%">
<col width="6%">
<col width="1%">
<col width="3%">
<col width="9%">
<col width="5%">
<col width="3%">
<col width="1%">
<col width="5%">
<col width="2%">
<col width="2%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">paragraph_id</th>
<th align="right">sentence_id</th>
<th align="left">sentence</th>
<th align="left">token_id</th>
<th align="left">token</th>
<th align="left">lemma</th>
<th align="left">upos</th>
<th align="left">xpos</th>
<th align="left">feats</th>
<th align="left">head_token_id</th>
<th align="left">dep_rel</th>
<th align="left">deps</th>
<th align="left">misc</th>
<th align="right">weight</th>
<th align="left">gender</th>
<th align="left">region</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">1</td>
<td align="left">saastuminen</td>
<td align="left">saastuminen</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">3</td>
<td align="left">luonnonvarojen</td>
<td align="left">luonnonvaro</td>
<td align="left">NOUN</td>
<td align="left">N,Pl,Gen</td>
<td align="left">Case=Gen|Number=Plur</td>
<td align="left">4</td>
<td align="left">nmod</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">4</td>
<td align="left">liikakäyttö</td>
<td align="left">liikakäyttö</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">1</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">6</td>
<td align="left">nälänhätä</td>
<td align="left">nälänhätä</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">1</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">saastuminen ja luonnonvarojen liikakäyttö, nälänhätä ja
ylikansoittuminen</td>
<td align="left">8</td>
<td align="left">ylikansoittuminen</td>
<td align="left">ylikansoittuminen</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">1</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">SpacesAfter=</td>
<td align="right">0.544</td>
<td align="left">Female</td>
<td align="left">Muu Etelä-Suomi</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="data-exploration">2. Data Exploration<a class="anchor" aria-label="anchor" href="#data-exploration"></a>
</h2>
<p>Now that we have formatted data, we can begin data exploration. These
functions are used to create summary tables and to find the most common
themes in your survey responses.</p>
<div class="section level3">
<h3 id="summary-tables">Summary Tables<a class="anchor" aria-label="anchor" href="#summary-tables"></a>
</h3>
<p>First, let’s create some summaries using <code>fst_summarise</code>,
<code>fst_pos</code> and <code>fst_length_summary</code></p>
<p>These functions are defined as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># FUNCTION DEFINITIONS</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>fst_summarise <span class="ot">&lt;-</span> <span class="cf">function</span>(data, </span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>                          <span class="at">desc =</span> <span class="st">"All respondents"</span>) </span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>fst_pos <span class="ot">&lt;-</span> <span class="cf">function</span>(data) </span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  </span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>fst_length_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>                               <span class="at">desc =</span> <span class="st">"All respondents"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>                               <span class="at">incl_sentences =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><strong>Summary of components</strong></p>
<ul>
<li>
<code>data</code> is the formatted data.</li>
<li>
<code>desc</code> is an optional name for the responses summarised,
if not provided it will default to “All respondents”.</li>
<li>
<code>incl_sentences</code> is an optional boolean for whether to
also summarise sentence length (in addition to word length), if not
provided it will default to TRUE.</li>
</ul>
<p>Hence, these functions are run for our sample data as follows:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_summarise.html">fst_summarise</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     Description Respondents No Response Proportion Total Words Unique Words</span></span>
<span><span class="co">## 1 All responses         945          25       0.97        4192         1132</span></span>
<span><span class="co">##   Unique Lemmas</span></span>
<span><span class="co">## 1           994</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_pos.html">fst_pos</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     UPOS                  UPOS_Name Count Proportion</span></span>
<span><span class="co">## 1    ADJ                  adjective   389      0.093</span></span>
<span><span class="co">## 2    ADP                 adposition    24      0.006</span></span>
<span><span class="co">## 3    ADV                     adverb    64      0.015</span></span>
<span><span class="co">## 4    AUX                  auxiliary     3      0.001</span></span>
<span><span class="co">## 5  CCONJ   coordinating conjunction     3      0.001</span></span>
<span><span class="co">## 6    DET                 determiner    28      0.007</span></span>
<span><span class="co">## 7   INTJ               interjection     2      0.000</span></span>
<span><span class="co">## 8   NOUN                       noun  3311      0.790</span></span>
<span><span class="co">## 9    NUM                    numeral     5      0.001</span></span>
<span><span class="co">## 10  PART                   particle    29      0.007</span></span>
<span><span class="co">## 11  PRON                    pronoun    12      0.003</span></span>
<span><span class="co">## 12 PROPN                proper noun    31      0.007</span></span>
<span><span class="co">## 13 PUNCT                punctuation    NA         NA</span></span>
<span><span class="co">## 14 SCONJ  subordinating conjunction    NA         NA</span></span>
<span><span class="co">## 15   SYM                     symbol     1      0.000</span></span>
<span><span class="co">## 16  VERB                       verb   278      0.066</span></span>
<span><span class="co">## 17     X                      other    12      0.003</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_length_summary.html">fst_length_summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 8</span></span></span>
<span><span class="co">##   Description              Respondents  Mean Minimum    Q1 Median    Q3 Maximum</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> All responses- Words             920  5.52       1     4      5     6      32</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> All responses- Sentences         920  1.01       1     1      1     1       3</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="identification-of-freqent-words-and-phrases">Identification of freqent words and phrases<a class="anchor" aria-label="anchor" href="#identification-of-freqent-words-and-phrases"></a>
</h3>
<div class="section level4">
<h4 id="wordclouds">Wordclouds<a class="anchor" aria-label="anchor" href="#wordclouds"></a>
</h4>
<p>The first of our frequent words visualisations in the wordcloud which
comes from the <code>wordcloud</code> package.</p>
<p>It is defined as follows:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>fst_wordcloud <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>                          <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>                          <span class="at">max =</span> <span class="dv">100</span>,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>                          <span class="at">use_svydesign_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>                          <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>                          <span class="at">svydesign =</span> <span class="cn">NULL</span>,</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>                          <span class="at">use_column_weights =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Summary of components</strong></p>
<ul>
<li>
<code>data</code> is the formatted data.</li>
<li>
<code>pos_filter</code> is an optional list of POS tags for
inclusion in the wordcloud. The default is NULL.</li>
<li>
<code>max</code> is the maximum number of words to display, the
default is 100.</li>
</ul>
<p>Then, we have options for weighting the words in the cloud. These
will all default to <strong>not</strong> include weights.</p>
<ul>
<li>
<code>use_svydesign_weights</code> should be set as TRUE if we want
to use weights from within a <em>svydesign</em> object.</li>
<li>The <code>id</code> is only required if weights are coming from a
<em>svydesign</em> object</li>
<li>The <code>svydesign</code> object</li>
</ul>
<p>Here are some examples of creating wordclouds:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_wordcloud.html">fst_wordcloud</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># We can only get weights from svydesign if they are NOT already in our formatted data. Hence we remove them for this demonstration!</span></span>
<span><span class="va">df2</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="fu"><a href="../reference/fst_wordcloud.html">fst_wordcloud</a></span><span class="op">(</span><span class="va">df2</span>, </span>
<span>              pos_filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOUN"</span>, <span class="st">"VERB"</span>, <span class="st">"ADJ"</span>, <span class="st">"ADV"</span><span class="op">)</span>,</span>
<span>              max<span class="op">=</span><span class="fl">100</span>, </span>
<span>              use_svydesign_weights <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>              id <span class="op">=</span> <span class="st">'fsd_id'</span>, </span>
<span>              svydesign <span class="op">=</span> <span class="va">svy_dev</span><span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="n-gram-plots">N-gram plots<a class="anchor" aria-label="anchor" href="#n-gram-plots"></a>
</h4>
<p>Then, we have functions to identify and plot the most frequent words
or n-grams (sets of n words in order).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>fst_freq <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>                     <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>                     <span class="at">norm =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>                     <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>                     <span class="at">strict =</span> <span class="cn">TRUE</span>,</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>                     <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>                     <span class="at">use_svydesign_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>                     <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>                     <span class="at">svydesign =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>                     <span class="at">use_column_weights =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>  </span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>fst_ngrams <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>                       <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>                       <span class="at">ngrams =</span> <span class="dv">1</span>,</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>                       <span class="at">norm =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>                       <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>                       <span class="at">strict =</span> <span class="cn">TRUE</span>,</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>                       <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>                       <span class="at">use_svydesign_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>                       <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>                       <span class="at">svydesign =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>                       <span class="at">use_column_weights =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Summary of components</strong></p>
<ul>
<li>
<code>data</code> is the formatted data.</li>
<li>
<code>number</code> is the number of top words/ngrams to
display</li>
<li>
<code>ngrams</code> is the type of n-grams, default is
<code>1</code>.</li>
<li>
<code>norm</code> is an optional method for normalising the data.
Valid settings are <code>"number_words"</code> (the number of words in
the responses), <code>"number_resp"</code> (the number of responses), or
<code>NULL</code> (raw count returned, <strong>default</strong>, also
used when weights are applied).</li>
<li>
<code>pos_filter</code> is an optional list of POS tags for
inclusion. The default is NULL.</li>
<li>
<code>strict</code> is whether to strictly cut-off at
<code>number</code> (ties are alphabetically ordered). The default value
is TRUE.</li>
<li>The <code>name</code> is an optional “name” for the plot to add to
title, default is NULL.</li>
</ul>
<p>Then, we again have options for weighting the words in the plot.
Again, these all default to <strong>not</strong> include weights.</p>
<ul>
<li>
<code>use_svydesign_weights</code> should be set as TRUE if we want
to use weights from within a <em>svydesign</em> object.</li>
<li>The <code>id</code> is only required if weights are coming from a
<em>svydesign</em> object</li>
<li>The <em>svydesign</em> object</li>
<li>
<code>use_svydesign_weights</code> should be set as TRUE if we want
to use weights from the weight column as set-up during the data
formatting.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_freq.html">fst_freq</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note:</span></span>
<span><span class="co">##  Words with equal occurrence are presented in alphabetical order. </span></span>
<span><span class="co">##  By default, words are presented in order to the `number` cutoff word. </span></span>
<span><span class="co">##  This means that equally-occurring later-alphabetically words beyond the cutoff word will not be displayed.</span></span></code></pre>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_ngrams.html">fst_ngrams</a></span><span class="op">(</span><span class="va">df</span>, </span>
<span>           number <span class="op">=</span> <span class="fl">9</span>, </span>
<span>           ngrams <span class="op">=</span> <span class="fl">2</span>, </span>
<span>           strict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           use_column_weights <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note:</span></span>
<span><span class="co">##  N-grams with equal occurrence are presented in alphabetical order. </span></span>
<span><span class="co">##  With `strict` = FALSE, n-grams occurring equally often as the `number` cutoff n-gram will be displayed.</span></span></code></pre>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-16-2.png" width="700"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_freq.html">fst_freq</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>         number <span class="op">=</span> <span class="fl">5</span>, </span>
<span>         strict <span class="op">=</span> <span class="cn">FALSE</span>,<span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note:</span></span>
<span><span class="co">##  Words with equal occurrence are presented in alphabetical order. </span></span>
<span><span class="co">##  With `strict` = FALSE, words occurring equally often as the `number` cutoff word will be displayed.</span></span></code></pre>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-16-3.png" width="700"></p>
<p>(<code><a href="../reference/fst_freq_table.html">fst_freq_table()</a></code> and <code><a href="../reference/fst_ngrams_table.html">fst_ngrams_table()</a></code>
can be used to instead create tables of the top words.)</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_freq_table.html">fst_freq_table</a></span><span class="op">(</span><span class="va">df</span>, number <span class="op">=</span> <span class="fl">15</span>, strict <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Note:</span></span>
<span><span class="co">##  Words with equal occurrence are presented in alphabetical order. </span></span>
<span><span class="co">##  With `strict` = FALSE, words occurring equally often as the `number` cutoff word will be displayed.</span></span></code></pre>
<pre><code><span><span class="co">##                 words occurrence</span></span>
<span><span class="co">## 1             köyhyys        258</span></span>
<span><span class="co">## 2           nälänhätä        239</span></span>
<span><span class="co">## 3                sota        231</span></span>
<span><span class="co">## 4      ilmastonmuutos        141</span></span>
<span><span class="co">## 5               puute        117</span></span>
<span><span class="co">## 6             ihminen        105</span></span>
<span><span class="co">## 7                vesi         98</span></span>
<span><span class="co">## 8        epätasa-arvo         87</span></span>
<span><span class="co">## 9              ahneus         84</span></span>
<span><span class="co">## 10              nälkä         81</span></span>
<span><span class="co">## 11             puhdas         75</span></span>
<span><span class="co">## 12            sairaus         59</span></span>
<span><span class="co">## 13          itsekkyys         58</span></span>
<span><span class="co">## 14       väestönkasvu         48</span></span>
<span><span class="co">## 15 välinpitämättömyys         47</span></span></code></pre>
</div>
</div>
</div>
<div class="section level2">
<h2 id="concept-network">3. Concept Network<a class="anchor" aria-label="anchor" href="#concept-network"></a>
</h2>
<p>Our concept network function uses the TextRank algorithm which is a
graph-based ranking model for text processing. Vertices represent words
and co-occurrence between words is shown through edges. Word importance
is determined recursively (through the unsupervised learning TextRank
algorithm) where words get more weight based on how many words co-occur
and the weight of these co-occurring words.</p>
<p>To utilise the TextRank algorithm in finnsurveytext, we use the
textrank package. For further information on the package, please see <a href="https://CRAN.R-project.org/package=textrank" class="external-link">this
documentation</a>. This package implements the TextRank and PageRank
algorithms. (PageRank is the algorithm that Google uses to rank
webpages.) You can read about the underlying TextRank algorithm <a href="https://web.eecs.umich.edu/~mihalcea/papers/mihalcea.emnlp04.pdf" class="external-link">here</a>
and about the PageRank algorithm <a href="https://doi.org/10.1016/S0169-7552(98)00110-X" class="external-link">here</a>.</p>
<p>The main concept network function is
<code><a href="../reference/fst_concept_network.html">fst_concept_network()</a></code>. It is defined as follows:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>fst_concept_network <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>                                concepts,</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>                                <span class="at">threshold =</span> <span class="cn">NULL</span>,</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>                                <span class="at">norm =</span> <span class="cn">NULL</span>,</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>                                <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a>                                <span class="at">title =</span> <span class="cn">NULL</span>) </span></code></pre></div>
<p><strong>Summary of components</strong></p>
<ul>
<li>
<code>data</code> is the formatted data.</li>
<li>
<code>concepts</code> are the concept words around which the network
is created.</li>
<li>
<code>threshold</code> is a minimum number of occurrences threshold
for ‘edge’ between searched term and other word, default is
<code>NULL</code>. Note, the threshold is applied before
normalisation.</li>
<li>
<code>norm</code> is an optional method for normalising the data.
Valid settings are <code>"number_words"</code> (the number of words in
the responses), <code>"number_resp"</code> (the number of responses), or
<code>NULL</code> (raw count returned, <strong>default</strong>, also
used when weights are applied).</li>
<li>
<code>pos_filter</code> is an optional list of POS tags for
inclusion. The default is NULL.</li>
<li>
<code>title</code> is an optional title for plot, default is
<code>NULL</code> and a generic title (“TextRank extracted keyword
occurrences”) will be used.</li>
</ul>
<p>For example, we can create the following concept network plots:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span><span class="va">df</span>, </span>
<span>                    concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span>, </span>
<span>                    <span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="comparison-functions">4. Comparison Functions<a class="anchor" aria-label="anchor" href="#comparison-functions"></a>
</h2>
<p>Recall that when we preprocessed the data, we included two additional
columns, gender and region, to allow for comparison between respondents
based on these values.</p>
<p>There are counterpart comparison functions for each of the functions
we have shown above.</p>
<p>The comparison <strong>summary tables</strong> are defined as
follows:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>fst_pos_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>                            field,</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>                            <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>                            <span class="at">rename_nulls =</span> <span class="st">'null_data'</span>)</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>fst_summarise_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a>                                  field,</span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>                                  <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>                                  <span class="at">rename_nulls =</span> <span class="st">'null_data'</span>)</span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a>fst_length_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a>                               field,</span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a>                               <span class="at">incl_sentences =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-14"><a href="#cb33-14" tabindex="-1"></a>                               <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-15"><a href="#cb33-15" tabindex="-1"></a>                               <span class="at">rename_nulls =</span> <span class="st">'null_data'</span>) </span></code></pre></div>
<p><strong>Summary of Components</strong></p>
<ul>
<li>
<code>data</code> is the formatted data.</li>
<li>
<code>field</code> is the column in <code>data</code> used for
splitting groups</li>
<li>We can choose whether to include or exclude surveys with no response
in our splitting column by setting <code>exclude_nulls</code>. The
default value is FALSE.</li>
<li>
<code>rename_nulls</code> is what to fill empty values with if
<code>exclude_nulls = FALSE</code>.</li>
</ul>
<p>Let’s compare our responses based on the region of the
respondent:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/fst_pos_compare.html">fst_pos_compare</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">'region'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="10%">
<col width="9%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="9%">
<col width="8%">
<col width="11%">
<col width="11%">
<col width="6%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">UPOS</th>
<th align="left">Part_of_Speech_Name</th>
<th align="right">Helsinki-Uusima-Count</th>
<th align="right">Helsinki-Uusima-Prop</th>
<th align="right">Länsi-Suomi-Count</th>
<th align="right">Länsi-Suomi-Prop</th>
<th align="right">Muu Etelä-Suomi-Count</th>
<th align="right">Muu Etelä-Suomi-Prop</th>
<th align="right">Pohjois- ja Itä-Suomi-Count</th>
<th align="right">Pohjois- ja Itä-Suomi-Prop</th>
<th align="right">null_data-Count</th>
<th align="right">null_data-Prop</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ADJ</td>
<td align="left">adjective</td>
<td align="right">118</td>
<td align="right">0.098</td>
<td align="right">105</td>
<td align="right">0.082</td>
<td align="right">79</td>
<td align="right">0.101</td>
<td align="right">84</td>
<td align="right">0.093</td>
<td align="right">3</td>
<td align="right">0.188</td>
</tr>
<tr class="even">
<td align="left">ADP</td>
<td align="left">adposition</td>
<td align="right">11</td>
<td align="right">0.009</td>
<td align="right">6</td>
<td align="right">0.005</td>
<td align="right">4</td>
<td align="right">0.005</td>
<td align="right">3</td>
<td align="right">0.003</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">ADV</td>
<td align="left">adverb</td>
<td align="right">20</td>
<td align="right">0.017</td>
<td align="right">22</td>
<td align="right">0.017</td>
<td align="right">8</td>
<td align="right">0.010</td>
<td align="right">13</td>
<td align="right">0.014</td>
<td align="right">1</td>
<td align="right">0.062</td>
</tr>
<tr class="even">
<td align="left">AUX</td>
<td align="left">auxiliary</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">CCONJ</td>
<td align="left">coordinating conjunction</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">DET</td>
<td align="left">determiner</td>
<td align="right">10</td>
<td align="right">0.008</td>
<td align="right">7</td>
<td align="right">0.005</td>
<td align="right">6</td>
<td align="right">0.008</td>
<td align="right">5</td>
<td align="right">0.006</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">INTJ</td>
<td align="left">interjection</td>
<td align="right">2</td>
<td align="right">0.002</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">NOUN</td>
<td align="left">noun</td>
<td align="right">936</td>
<td align="right">0.774</td>
<td align="right">1028</td>
<td align="right">0.805</td>
<td align="right">610</td>
<td align="right">0.776</td>
<td align="right">725</td>
<td align="right">0.802</td>
<td align="right">12</td>
<td align="right">0.750</td>
</tr>
<tr class="odd">
<td align="left">NUM</td>
<td align="left">numeral</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">3</td>
<td align="right">0.002</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">PART</td>
<td align="left">particle</td>
<td align="right">15</td>
<td align="right">0.012</td>
<td align="right">9</td>
<td align="right">0.007</td>
<td align="right">2</td>
<td align="right">0.003</td>
<td align="right">3</td>
<td align="right">0.003</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">PRON</td>
<td align="left">pronoun</td>
<td align="right">4</td>
<td align="right">0.003</td>
<td align="right">3</td>
<td align="right">0.002</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">4</td>
<td align="right">0.004</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">PROPN</td>
<td align="left">proper noun</td>
<td align="right">12</td>
<td align="right">0.010</td>
<td align="right">14</td>
<td align="right">0.011</td>
<td align="right">3</td>
<td align="right">0.004</td>
<td align="right">2</td>
<td align="right">0.002</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">PUNCT</td>
<td align="left">punctuation</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">SCONJ</td>
<td align="left">subordinating conjunction</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">SYM</td>
<td align="left">symbol</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">VERB</td>
<td align="left">verb</td>
<td align="right">72</td>
<td align="right">0.060</td>
<td align="right">75</td>
<td align="right">0.059</td>
<td align="right">69</td>
<td align="right">0.088</td>
<td align="right">62</td>
<td align="right">0.069</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">X</td>
<td align="left">other</td>
<td align="right">6</td>
<td align="right">0.005</td>
<td align="right">3</td>
<td align="right">0.002</td>
<td align="right">1</td>
<td align="right">0.001</td>
<td align="right">2</td>
<td align="right">0.002</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/fst_summarise_compare.html">fst_summarise_compare</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">'region'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="22%">
<col width="12%">
<col width="12%">
<col width="11%">
<col width="12%">
<col width="13%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">Description</th>
<th align="right">Respondents</th>
<th align="right">No Response</th>
<th align="right">Proportion</th>
<th align="right">Total Words</th>
<th align="right">Unique Words</th>
<th align="right">Unique Lemmas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Helsinki-Uusima</td>
<td align="right">269</td>
<td align="right">10</td>
<td align="right">0.96</td>
<td align="right">1209</td>
<td align="right">493</td>
<td align="right">443</td>
</tr>
<tr class="even">
<td align="left">Länsi-Suomi</td>
<td align="right">284</td>
<td align="right">8</td>
<td align="right">0.97</td>
<td align="right">1277</td>
<td align="right">478</td>
<td align="right">425</td>
</tr>
<tr class="odd">
<td align="left">Muu Etelä-Suomi</td>
<td align="right">176</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">786</td>
<td align="right">360</td>
<td align="right">336</td>
</tr>
<tr class="even">
<td align="left">Pohjois- ja Itä-Suomi</td>
<td align="right">213</td>
<td align="right">7</td>
<td align="right">0.97</td>
<td align="right">904</td>
<td align="right">338</td>
<td align="right">309</td>
</tr>
<tr class="odd">
<td align="left">null_data</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">16</td>
<td align="right">16</td>
<td align="right">16</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/fst_length_compare.html">fst_length_compare</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">'region'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="40%">
<col width="14%">
<col width="7%">
<col width="9%">
<col width="4%">
<col width="8%">
<col width="3%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">Description</th>
<th align="right">Respondents</th>
<th align="right">Mean</th>
<th align="right">Minimum</th>
<th align="right">Q1</th>
<th align="right">Median</th>
<th align="right">Q3</th>
<th align="right">Maximum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Helsinki-Uusima- Words</td>
<td align="right">259</td>
<td align="right">5.579</td>
<td align="right">1</td>
<td align="right">4.0</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">25</td>
</tr>
<tr class="even">
<td align="left">Helsinki-Uusima- Sentences</td>
<td align="right">259</td>
<td align="right">1.023</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Länsi-Suomi- Words</td>
<td align="right">276</td>
<td align="right">5.620</td>
<td align="right">1</td>
<td align="right">4.0</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">32</td>
</tr>
<tr class="even">
<td align="left">Länsi-Suomi- Sentences</td>
<td align="right">276</td>
<td align="right">1.007</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Muu Etelä-Suomi- Words</td>
<td align="right">176</td>
<td align="right">5.483</td>
<td align="right">2</td>
<td align="right">4.0</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="left">Muu Etelä-Suomi- Sentences</td>
<td align="right">176</td>
<td align="right">1.017</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Pohjois- ja Itä-Suomi- Words</td>
<td align="right">206</td>
<td align="right">5.311</td>
<td align="right">1</td>
<td align="right">4.0</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">Pohjois- ja Itä-Suomi- Sentences</td>
<td align="right">206</td>
<td align="right">1.015</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">null_data- Words</td>
<td align="right">3</td>
<td align="right">6.333</td>
<td align="right">5</td>
<td align="right">5.5</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">null_data- Sentences</td>
<td align="right">3</td>
<td align="right">1.000</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>The <strong>ngrams</strong> comparison functions are defined
similarly (with some additional new values):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>fst_freq_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>                             field,</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>                             <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>                             <span class="at">norm =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>                             <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>                             <span class="at">strict =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>                             <span class="at">use_svydesign_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a>                             <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a>                             <span class="at">svydesign =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>                             <span class="at">use_column_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a>                             <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a>                             <span class="at">rename_nulls =</span> <span class="st">'null_data'</span>,</span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a>                             <span class="at">unique_colour =</span> <span class="st">"indianred"</span>,</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a>                             <span class="at">title_size =</span> <span class="dv">20</span>,</span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a>                             <span class="at">subtitle_size =</span> <span class="dv">15</span>)</span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a></span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a>fst_ngrams_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a>                              field,</span>
<span id="cb37-20"><a href="#cb37-20" tabindex="-1"></a>                              <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb37-21"><a href="#cb37-21" tabindex="-1"></a>                              <span class="at">ngrams =</span> <span class="dv">1</span>,</span>
<span id="cb37-22"><a href="#cb37-22" tabindex="-1"></a>                              <span class="at">norm =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-23"><a href="#cb37-23" tabindex="-1"></a>                              <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-24"><a href="#cb37-24" tabindex="-1"></a>                              <span class="at">strict =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-25"><a href="#cb37-25" tabindex="-1"></a>                              <span class="at">use_svydesign_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-26"><a href="#cb37-26" tabindex="-1"></a>                              <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb37-27"><a href="#cb37-27" tabindex="-1"></a>                              <span class="at">svydesign =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-28"><a href="#cb37-28" tabindex="-1"></a>                              <span class="at">use_column_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-29"><a href="#cb37-29" tabindex="-1"></a>                              <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-30"><a href="#cb37-30" tabindex="-1"></a>                              <span class="at">rename_nulls =</span> <span class="st">'null_data'</span>,</span>
<span id="cb37-31"><a href="#cb37-31" tabindex="-1"></a>                              <span class="at">unique_colour =</span> <span class="st">"indianred"</span>,</span>
<span id="cb37-32"><a href="#cb37-32" tabindex="-1"></a>                              <span class="at">title_size =</span> <span class="dv">20</span>,</span>
<span id="cb37-33"><a href="#cb37-33" tabindex="-1"></a>                              <span class="at">subtitle_size =</span> <span class="dv">15</span>)</span></code></pre></div>
<p>The <strong>new components</strong> are:</p>
<ul>
<li>
<code>unique_colour</code> is chosen to differentiate values which
are unique to one group of respondents, the default is “indianred”</li>
<li>
<code>title_size</code> and <code>subtitle_size</code> set these,
you may need to change them from the default values if any of your group
names are long or if there are many groups.</li>
</ul>
<p>For the ngrams, let’s compare respondents by gender.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_freq_compare.html">fst_freq_compare</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">'gender'</span>, use_column_weights <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_ngrams_compare.html">fst_ngrams_compare</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">'gender'</span>, ngrams <span class="op">=</span> <span class="fl">2</span>, use_column_weights <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-23-2.png" width="700"></p>
<p>The <strong>comparison cloud</strong> extends the wordcloud
concept.</p>
<p>A comparison cloud compares the relative frequency with which a term
is used in two or more documents. This cloud shows words that occur more
regularly in responses from a specific type of respondent. For more
information about comparison clouds, you can read <a href="https://CRAN.R-project.org/package=wordcloud" class="external-link">this
documentation</a>.</p>
<p>The comparison cloud is defined as follows, with settings as defined
for the previous functions:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>fst_comparison_cloud <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>                                 field,</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>                                 <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>                                 <span class="at">max =</span> <span class="dv">100</span>,</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>                                 <span class="at">use_svydesign_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a>                                 <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>                                 <span class="at">svydesign =</span> <span class="cn">NULL</span>,</span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>                                 <span class="at">use_column_weights =</span> <span class="cn">FALSE</span>,</span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>                                 <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a>                                 <span class="at">rename_nulls =</span> <span class="st">"null_data"</span>) </span></code></pre></div>
<p>Thus, we can create comparison clouds:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_comparison_cloud.html">fst_comparison_cloud</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">'gender'</span>, max <span class="op">=</span> <span class="fl">40</span>, use_column_weights <span class="op">=</span> <span class="cn">TRUE</span>, exclude_nulls <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-25-1.png" width="750px"></p>
<p>Finally we have the comparison <strong>concept network</strong> which
has the following components which should be familiar from previous
functions:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>fst_concept_network_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(data,</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>                                        concepts,</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>                                        field,</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>                                        <span class="at">norm =</span> <span class="cn">NULL</span>,</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>                                        <span class="at">threshold =</span> <span class="cn">NULL</span>,</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>                                        <span class="at">pos_filter =</span> <span class="cn">NULL</span>,</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>                                        <span class="at">exclude_nulls =</span> <span class="cn">FALSE</span>,</span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a>                                        <span class="at">rename_nulls =</span> <span class="st">'null_data'</span>,</span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a>                                        <span class="at">title_size =</span> <span class="dv">20</span>,</span>
<span id="cb42-10"><a href="#cb42-10" tabindex="-1"></a>                                        <span class="at">subtitle_size =</span> <span class="dv">15</span>)</span></code></pre></div>
<p>We run the comparison concept network as follows:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fst_concept_network_compare.html">fst_concept_network_compare</a></span><span class="op">(</span><span class="va">df</span>, </span>
<span>                            concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span>, </span>
<span>                            <span class="st">'gender'</span>,</span>
<span>                            exclude_nulls <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                            <span class="op">)</span></span></code></pre></div>
<p><img src="Overview-PackageTutorial_files/figure-html/unnamed-chunk-27-1.png" width="700"></p>
<p>For more information on the <code>finnsurveytext</code> functions,
see the <a href="https://dariah-fi-survey-concept-network.github.io/finnsurveytext/">package
website</a> and documentation available from the <a href="https://CRAN.R-project.org/package=finnsurveytext" class="external-link">CRAN</a>.</p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The package comes with sample data from two surveys obtained from the
Finnish Social Science Data Archive:</p>
<div class="section level5">
<h5 id="child-barometer-data">1. Child Barometer Data<a class="anchor" aria-label="anchor" href="#child-barometer-data"></a>
</h5>
<ul>
<li>Source: FSD3134 Lapsibarometri 2016</li>
<li>Question: q7 ‘Kertoisitko, mitä sinun mielestäsi kiusaaminen on?
(Avokysymys)’</li>
<li>Licence: (A) openly available for all users without registration (CC
BY 4.0).</li>
<li>Link to Data: <a href="https://urn.fi/urn:nbn:fi:fsd:T-FSD3134" class="external-link uri">https://urn.fi/urn:nbn:fi:fsd:T-FSD3134</a>
</li>
</ul>
</div>
<div class="section level5">
<h5 id="development-cooperation-data">2. Development Cooperation Data<a class="anchor" aria-label="anchor" href="#development-cooperation-data"></a>
</h5>
<ul>
<li>Source: FSD2821 Nuorten ajatuksia kehitysyhteistyöstä 2012</li>
<li>Questions: q11_1 ‘Jatka lausetta: Kehitysmaa on maa, jossa…
(Avokysymys)’, q11_2 ‘Jatka lausetta: Kehitysyhteistyö on toimintaa,
jossa… (Avokysymys)’, q11_3 ‘Jatka lausetta: Maailman kolme suurinta
ongelmaa ovat… (Avokysymys)’</li>
<li>Licence: (A) openly available for all users without registration (CC
BY 4.0).</li>
<li>Link to Data: <a href="https://urn.fi/urn:nbn:fi:fsd:T-FSD2821" class="external-link uri">https://urn.fi/urn:nbn:fi:fsd:T-FSD2821</a>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adeline Clarke, Krista Lagus, Katja Laine, Maria Litova, Matti Nelimarkka, Joni Oksanen, Jaakko Peltonen, Tuukka Oikarinen, Jani-Matti Tirkkonen, Ida Toivanen, Maria Valaste, DARIAH-FI.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
