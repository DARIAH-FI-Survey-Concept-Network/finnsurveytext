<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>InDetail1-DataPreparation • finnsurveytext</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="InDetail1-DataPreparation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">finnsurveytext</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../../articles/web_only/Extra-AnalysingOtherLanguages.html">Extra-AnalysingOtherLanguages</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/Extra-UseWithSurveyPackage.html">Extra-UseWithSurveyPackage</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/InDetail1-DataPreparation.html">InDetail1-DataPreparation</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/InDetail2-DataExploration.html">InDetail2-DataExploration</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/InDetail3-ConceptNetworkOverview.html">InDetail3-ConceptNetworkOverview</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/InDetail4-ComparisonFunctions.html">InDetail4-ComparisonFunctions</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/InDetail5-AnalysisExample1.html">InDetail5-AnalysisExample1</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/InDetail6-AnalysisExample2.html">InDetail6-AnalysisExample2</a></li>
    <li><a class="dropdown-item" href="../../articles/Overview-PackageTutorial.html">Overview-PackageTutorial</a></li>
    <li><a class="dropdown-item" href="../../articles/ReadMe.html">ReadMe</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DARIAH-FI-Survey-Concept-Network/finnsurveytext/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>InDetail1-DataPreparation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DARIAH-FI-Survey-Concept-Network/finnsurveytext/blob/main/vignettes/web_only/InDetail1-DataPreparation.Rmd" class="external-link"><code>vignettes/web_only/InDetail1-DataPreparation.Rmd</code></a></small>
      <div class="d-none name"><code>InDetail1-DataPreparation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Many natural language processing (NLP) tasks require data which is
systematically pre-processed into a format useful for analysis.
Pre-processing commonly involves activities such as:</p>
<ul>
<li>tokenisation into words or sentences</li>
<li>conversion to lowercase</li>
<li>removing stopwords (common words like ‘a’, ‘the’, etc.)</li>
<li>stemming (removing common suffixes from words, eg. ‘walking’ and
‘walked’ becomes ‘walk’) or lemmatising (rewriting words in base form,
eg. ‘crying’ and ‘cried’ become ‘cry’)
<ul>
<li>
<code>finnsurveytext</code> uses lemmatisation rather than
stemming.</li>
<li>Stemming is a more straightforward process (As it just removes
common suffixes such as ‘ing’) but can cause errors which change word
meaning (eg. ‘caring’ is stemmed to ‘car’)</li>
<li>Lemmatisation is often considered superior but it is slower as it
requires a dictionary of words.<br>
</li>
</ul>
</li>
<li>part-of-speech (POS) tagging</li>
</ul>
<div class="section level3">
<h3 id="installation-of-package-">Installation of package.<a class="anchor" aria-label="anchor" href="#installation-of-package-"></a>
</h3>
<p>Once the package is installed, you can load the
<code>finnsurveytext</code> package as below: (Other required packages
such as <code>dplyr</code> and <code>stringr</code> will also be
installed if they are not currently installed in your environment.)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dariah-fi-survey-concept-network.github.io/finnsurveytext/">finnsurveytext</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="overview-of-functions">Overview of Functions<a class="anchor" aria-label="anchor" href="#overview-of-functions"></a>
</h3>
<p>The functions covered in this tutorial are:</p>
<ol style="list-style-type: decimal">
<li><code><a href="../../reference/fst_format.html">fst_format()</a></code></li>
<li><code><a href="../../reference/fst_find_stopwords.html">fst_find_stopwords()</a></code></li>
<li><code><a href="../../reference/fst_rm_stop_punct.html">fst_rm_stop_punct()</a></code></li>
<li><code><a href="../../reference/fst_prepare.html">fst_prepare()</a></code></li>
</ol>
</div>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>This tutorial uses two sources of data from the Finnish Social
Science Data Archive:</p>
<div class="section level4">
<h4 id="child-barometer-data">1. Child Barometer Data<a class="anchor" aria-label="anchor" href="#child-barometer-data"></a>
</h4>
<ul>
<li>Source: FSD3134 Lapsibarometri 2016</li>
<li>Question: q7 ‘Kertoisitko, mitä sinun mielestäsi kiusaaminen on?
(Avokysymys)’</li>
<li>Licence: (A) openly available for all users without registration (CC
BY 4.0).</li>
<li>Link to Data: <a href="https://urn.fi/urn:nbn:fi:fsd:T-FSD3134" class="external-link uri">https://urn.fi/urn:nbn:fi:fsd:T-FSD3134</a>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="development-cooperation-data">2. Development Cooperation Data<a class="anchor" aria-label="anchor" href="#development-cooperation-data"></a>
</h4>
<ul>
<li>Source: FSD2821 Nuorten ajatuksia kehitysyhteistyöstä 2012</li>
<li>Questions: q11_1 ‘Jatka lausetta: Kehitysmaa on maa, jossa…
(Avokysymys)’, q11_2 ‘Jatka lausetta: Kehitysyhteistyö on toimintaa,
jossa… (Avokysymys)’, q11_3’ Jatka lausetta: Maailman kolme suurinta
ongelmaa ovat… (Avokysymys)’</li>
<li>Licence: (A) openly available for all users without registration (CC
BY 4.0).</li>
<li>Link to Data: <a href="https://urn.fi/urn:nbn:fi:fsd:T-FSD2821" class="external-link uri">https://urn.fi/urn:nbn:fi:fsd:T-FSD2821</a>
</li>
</ul>
<p>Both of these will be demonstrated below but either can be used to
complete the tutorial. If you would prefer to use your own data, you can
read in this data through <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> or similar so that you
have a ‘raw’ dataframe ready in your R environment.</p>
</div>
<div class="section level4">
<h4 id="conll-u-format-overview">CoNLL-U Format Overview<a class="anchor" aria-label="anchor" href="#conll-u-format-overview"></a>
</h4>
<p>The <code>finnsurveytext</code> package uses the CoNLL-U format. This
tutorial demonstrates the process of preparing Finnish survey text data
into this format using functions in r/01_prepare.r.</p>
<p>CoNLL-U is a popular annotation scheme often used in Natural Language
Processing (NLP) tasks to tokenise and annotate text. In CoNLL-U format,
the text is split into one line per word and ten features of each word
are recorded including an ID, part-of-speech tagging, the word itself
(eg. ‘likes’), and word lemma (eg. ‘like’). CoNLL stands for the
Conference of Natural Language Learning and CoNLL-U format was
introduced in 2014.</p>
<p>More information on CoNLL-U format can be found in the Universal
Dependencies Project, <a href="https://universaldependencies.org/format.html" class="external-link uri">https://universaldependencies.org/format.html</a>.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="the-whole-story">The Whole Story<a class="anchor" aria-label="anchor" href="#the-whole-story"></a>
</h2>
<p>A single function, <code>fst_prepare</code> (which calls all the data
preparation functions within the package) can be used to prepare the
data into the required CoNNL-U format.</p>
<div class="section level3">
<h3 id="child-barometer-data-1">1. Child Barometer Data<a class="anchor" aria-label="anchor" href="#child-barometer-data-1"></a>
</h3>
<p>Using our Child Barometer bullying data, we can call this function as
follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>prepd_bullying <span class="ot">&lt;-</span> <span class="fu">fst_prepare</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="at">data =</span> child,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="at">question =</span> <span class="st">"q7"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="at">id =</span> <span class="st">'fsd_id'</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="at">stopword_list =</span> <span class="st">"nltk"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="at">language =</span> <span class="st">"fi"</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="at">model =</span> <span class="st">"ftb"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="at">weights =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  <span class="at">add_cols =</span> <span class="cn">NULL</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>)</span></code></pre></div>
<p>Summary of components</p>
<ul>
<li>
<code>data</code> is the dataframe of interest. In this case, we are
using data that comes with the package called ‘child_barometer’.
Otherwise, if you read in a csv containing a dataframe, such as through
<code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> in base R for use in this tutorial.</li>
<li>The <code>question</code> is the name of the column in your data
which contains the open-ended survey question. In this example, the
responses about bullying are in question 7.</li>
<li>The <code>id</code> is a unique identifier for each response.</li>
<li>We have chosen to remove stopwords from the “nltk” stopword list in
this example. To find the relevant lists of stopwords, you can run the
<code><a href="../../reference/fst_find_stopwords.html">fst_find_stopwords()</a></code> function which is outlined below.
Punctuation is also removed from the data whenever stopwords are
removed.</li>
<li>The function also requires a language model available for
<code>udpipe</code>, in this case we are using the default Finnish
Treebank, <code>model = "ftb"</code>. (There are two options for Finnish
langage model; the other option is the Turku Dependency Treebank. For
further detail on the treebanks, see the <strong>Format as
CoNLL-U</strong> section below.)</li>
<li>Optionally, you can add a weight column and/or other columns for
comparing different groups of respondents in later analysis. We are not
adding these in this example.</li>
<li>
<code>manual</code> and <code>manual_list</code> can be used if you
want to manually provide a list of stopwords to remove from the
data.</li>
<li>The results in CoNLL-U format are stored in the local environment as
“prepd_bullying”.</li>
</ul>
</div>
<div class="section level3">
<h3 id="development-cooperation-data-1">2. Development Cooperation Data<a class="anchor" aria-label="anchor" href="#development-cooperation-data-1"></a>
</h3>
<p>As an example, the Development Cooperation survey q11_2 data could be
prepared using this function call:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prepd_dev</span> <span class="op">&lt;-</span> <span class="fu">fst_prepare_conllu</span><span class="op">(</span></span>
<span>  <span class="va">dev_coop</span>,</span>
<span>  question <span class="op">=</span> <span class="st">"q11_2"</span>,</span>
<span>  stopword_list <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"tdt"</span>, </span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_cols <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  manual <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  manual_list <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>data</code> is the dataframe of interest. In this case, we are
using data that comes with the package called ‘dev_data’. Otherwise, if
you read in a csv containing a dataframe, such as through
<code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> in base R for use in this tutorial.</li>
<li>The <code>question</code> is the name of the column in your data
which contains the open-ended survey question. In this example, the
responses are in question 11_2.</li>
<li>We have chosen <em>not</em> to remove stopwords in this example.
(<code>stopword_list = NULL</code>)</li>
<li>The function also requires a language model available for [udpipe],
in this case we are using the Turku Dependency Treebank,
<code>model = "tdt"</code>.</li>
<li>The results in CoNLL-U format are stored in the local environment as
“prepd_dev”.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="in-greater-detail">In greater detail<a class="anchor" aria-label="anchor" href="#in-greater-detail"></a>
</h2>
<p>To better understand the <code><a href="../../reference/fst_prepare.html">fst_prepare()</a></code> function, we will
go through each of the functions that this one calls. These are:</p>
<ul>
<li><code><a href="../../reference/fst_format.html">fst_format()</a></code></li>
<li><code>fst_rm_stopwords_punct()</code></li>
</ul>
<p>Additionally, the <code><a href="../../reference/fst_find_stopwords.html">fst_find_stopwords()</a></code> function can be
used to find currently available lists of stopwords for exclusion from
the data. (The default “language” is “fi”, but ) The “name” column can
be used to choose a list for the <code>stopword_list</code> variable
above. Stopword lists are lists of common words (eg. “and”, “the”, and
“is”, or in Finnish “olla”, “ollet”, “ollen”, and “on”…) which are often
filtered out of the data, leaving less frequently-occurring, and thus
more more meaningful, words remaining.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stopwords</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_find_stopwords.html">fst_find_stopwords</a></span><span class="op">(</span><span class="st">"fi"</span><span class="op">)</span></span></code></pre></div>
<p>The stopwords lists can be very long, so only one (nltk) is shown
below. Another two lists, snowball and stopwords-iso, can be found by
running the <code><a href="../../reference/fst_find_stopwords.html">fst_find_stopwords()</a></code> function in your local
environment.</p>
<table class="table">
<colgroup>
<col width="0%">
<col width="99%">
<col width="0%">
</colgroup>
<thead><tr class="header">
<th align="left">Name</th>
<th align="left">Stopwords</th>
<th align="left">Length</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">nltk</td>
<td align="left">olla , olen , olet , on , olemme , olette , ovat , ole
, oli , olisi , olisit , olisin , olisimme, olisitte, olisivat, olit ,
olin , olimme , olitte , olivat , ollut , olleet , en , et , ei , emme ,
ette , eivät , minä , minun , minut , minua , minussa , minusta , minuun
, minulla , minulta , minulle , sinä , sinun , sinut , sinua , sinussa ,
sinusta , sinuun , sinulla , sinulta , sinulle , hän , hänen , hänet ,
häntä , hänessä , hänestä , häneen , hänellä , häneltä , hänelle , me ,
meidän , meidät , meitä , meissä , meistä , meihin , meillä , meiltä ,
meille , te , teidän , teidät , teitä , teissä , teistä , teihin ,
teillä , teiltä , teille , he , heidän , heidät , heitä , heissä ,
heistä , heihin , heillä , heiltä , heille , tämä , tämän , tätä , tässä
, tästä , tähän , tallä , tältä , tälle , tänä , täksi , tuo , tuon ,
tuotä , tuossa , tuosta , tuohon , tuolla , tuolta , tuolle , tuona ,
tuoksi , se , sen , sitä , siinä , siitä , siihen , sillä , siltä ,
sille , siksi , nämä , näiden , näitä , näissä , näistä , näihin ,
näillä , näiltä , näille , näinä , näiksi , nuo , noiden , noita ,
noissa , noista , noihin , noilla , noilta , noille , noina , noiksi ,
ne , niiden , niitä , niissä , niistä , niihin , niillä , niiltä ,
niille , niinä , niiksi , kuka , kenen , kenet , ketä , kenessä ,
kenestä , keneen , kenellä , keneltä , kenelle , kenenä , keneksi ,
ketkä , keiden , keitä , keissä , keistä , keihin , keillä , keiltä ,
keille , keinä , keiksi , mikä , minkä , mitä , missä , mistä , mihin ,
millä , miltä , mille , miksi , mitkä , joka , jonka , jota , jossa ,
josta , johon , jolla , jolta , jolle , jona , joksi , jotka , joiden ,
joita , joissa , joista , joihin , joilla , joilta , joille , joina ,
joiksi , että , ja , jos , koska , kuin , mutta , niin , sekä , tai ,
vaan , vai , vaikka , kanssa , mukaan , noin , poikki , yli , kun , nyt
, itse</td>
<td align="left">229</td>
</tr></tbody>
</table>
<div class="section level3">
<h3 id="format-as-connl-u">Format as CoNNL-U<a class="anchor" aria-label="anchor" href="#format-as-connl-u"></a>
</h3>
<p><code><a href="../../reference/fst_format.html">fst_format()</a></code></p>
<p>This function is used to format the data from your open-ended survey
question into CoNLL-U format. It also:</p>
<ul>
<li>trims trailing whitespace from the data;</li>
<li>converts the ‘lemma’ and ‘token’ columns to lowercase; and,</li>
<li>removes NA values.</li>
</ul>
<p>Our package works for two of the Finnish language models available,
<a href="https://universaldependencies.org/treebanks/fi_tdt/index.html" class="external-link">Turku
Dependency Treebank (TDT)</a> and <a href="https://universaldependencies.org/treebanks/fi_ftb/index.html" class="external-link">FinnTreeBank
(FTB)</a>. Further information about these treebanks can be found at the
links but, in brief, the TDT is considered “broad coverage” and includes
texts from Wikipedia and news sources, and FTB consists of manually
annotated grammatical examples from <a href="https://kaino.kotus.fi/visk/etusivu.php" class="external-link">VISK</a>.</p>
<p>The <code>fst_format_conllu()</code> function utilises the
<code>udpipe</code> <a href="https://cran.r-project.org/web/packages/udpipe/vignettes/udpipe-annotation.html" class="external-link">package</a>
and can be run as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conllu_dev_q11_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_format.html">fst_format</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dev_coop</span>, question <span class="op">=</span> <span class="st">"q11_1"</span>, id <span class="op">=</span> <span class="st">'fsd_id'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Downloading udpipe model from https://raw.githubusercontent.com/jwijffels/udpipe.models.ud.2.5/master/inst/udpipe-ud-2.5-191206/finnish-ftb-ud-2.5-191206.udpipe to /home/runner/work/finnsurveytext/finnsurveytext/vignettes/web_only/finnish-ftb-ud-2.5-191206.udpipe</span></span>
<span><span class="co">#&gt;  - This model has been trained on version 2.5 of data from https://universaldependencies.org</span></span>
<span><span class="co">#&gt;  - The model is distributed under the CC-BY-SA-NC license: https://creativecommons.org/licenses/by-nc-sa/4.0</span></span>
<span><span class="co">#&gt;  - Visit https://github.com/jwijffels/udpipe.models.ud.2.5 for model license details.</span></span>
<span><span class="co">#&gt;  - For a list of all models and their licenses (most models you can download with this package have either a CC-BY-SA or a CC-BY-SA-NC license) read the documentation at ?udpipe_download_model. For building your own models: visit the documentation by typing vignette('udpipe-train', package = 'udpipe')</span></span>
<span><span class="co">#&gt; Downloading finished, model stored at '/home/runner/work/finnsurveytext/finnsurveytext/vignettes/web_only/finnish-ftb-ud-2.5-191206.udpipe'</span></span>
<span><span class="va">conllu_cb_bullying</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_format.html">fst_format</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">child</span>, question <span class="op">=</span> <span class="st">"q7"</span>, model <span class="op">=</span> <span class="st">"tdt"</span>, id <span class="op">=</span> <span class="st">'fsd_id'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Downloading udpipe model from https://raw.githubusercontent.com/jwijffels/udpipe.models.ud.2.5/master/inst/udpipe-ud-2.5-191206/finnish-tdt-ud-2.5-191206.udpipe to /home/runner/work/finnsurveytext/finnsurveytext/vignettes/web_only/finnish-tdt-ud-2.5-191206.udpipe</span></span>
<span><span class="co">#&gt;  - This model has been trained on version 2.5 of data from https://universaldependencies.org</span></span>
<span><span class="co">#&gt;  - The model is distributed under the CC-BY-SA-NC license: https://creativecommons.org/licenses/by-nc-sa/4.0</span></span>
<span><span class="co">#&gt;  - Visit https://github.com/jwijffels/udpipe.models.ud.2.5 for model license details.</span></span>
<span><span class="co">#&gt;  - For a list of all models and their licenses (most models you can download with this package have either a CC-BY-SA or a CC-BY-SA-NC license) read the documentation at ?udpipe_download_model. For building your own models: visit the documentation by typing vignette('udpipe-train', package = 'udpipe')</span></span>
<span><span class="co">#&gt; Downloading finished, model stored at '/home/runner/work/finnsurveytext/finnsurveytext/vignettes/web_only/finnish-tdt-ud-2.5-191206.udpipe'</span></span></code></pre></div>
<p><em>Note: the first time you run this function, it will download the
relevant treebank from udpipe for use in the annotations.</em></p>
<p>The top 5 rows of the “conllu_cb_bullying” table are shown below:</p>
<table class="table">
<colgroup>
<col width="3%">
<col width="6%">
<col width="5%">
<col width="8%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="41%">
<col width="6%">
<col width="3%">
<col width="2%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">paragraph_id</th>
<th align="right">sentence_id</th>
<th align="left">sentence</th>
<th align="left">token_id</th>
<th align="left">token</th>
<th align="left">lemma</th>
<th align="left">upos</th>
<th align="left">xpos</th>
<th align="left">feats</th>
<th align="left">head_token_id</th>
<th align="left">dep_rel</th>
<th align="left">deps</th>
<th align="left">misc</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">1</td>
<td align="left">jos</td>
<td align="left">jos</td>
<td align="left">SCONJ</td>
<td align="left">C</td>
<td align="left">NA</td>
<td align="left">3</td>
<td align="left">mark</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">2</td>
<td align="left">kaveri</td>
<td align="left">kaveri</td>
<td align="left">NOUN</td>
<td align="left">N</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">3</td>
<td align="left">nsubj</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">3</td>
<td align="left">tönii</td>
<td align="left">töniä</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">4</td>
<td align="left">.</td>
<td align="left">.</td>
<td align="left">PUNCT</td>
<td align="left">Punct</td>
<td align="left">NA</td>
<td align="left">3</td>
<td align="left">punct</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Jos lyö.</td>
<td align="left">1</td>
<td align="left">jos</td>
<td align="left">jos</td>
<td align="left">SCONJ</td>
<td align="left">C</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">mark</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Jos lyö.</td>
<td align="left">2</td>
<td align="left">lyö</td>
<td align="left">lyödä</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
</tbody>
</table>
<p>´fst_format()` takes 6 arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code> the dataframe containing the survey data.</li>
<li>
<code>question</code> is the open-ended survey question header in
the table, such as “q9”</li>
<li>
<code>id</code> is the unique ID for each survey response.</li>
<li>
<code>model</code> is the chosen Finnish treebank for annotation,
either “ftb” (the default) or “tdt”.</li>
<li>
<code>weights</code>, optional, a column containing weights for the
reponses.</li>
<li>
<code>add_cols</code>, optional, any other columns to bring into the
formatted data.</li>
</ol>
</div>
<div class="section level3">
<h3 id="remove-stopwords-and-punctuation-from-conll-u-data">Remove stopwords and punctuation from CoNLL-U data<a class="anchor" aria-label="anchor" href="#remove-stopwords-and-punctuation-from-conll-u-data"></a>
</h3>
<p><code><a href="../../reference/fst_rm_stop_punct.html">fst_rm_stop_punct()</a></code></p>
<p>This (optional) function will remove stopwords and punctuation from
the CoNLL-U data. <code>fst_find_stopwords</code> can be used to find
options for stopwords lists.</p>
<p><code><a href="../../reference/fst_rm_stop_punct.html">fst_rm_stop_punct()</a></code> takes 2 arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code> is output from
<code>fst_format_conllu()</code>
</li>
<li>
<code>stopword_list</code> is a list of Finnish stopwords, the
default is “nltk” but any “Name” column from
<code><a href="../../reference/fst_find_stopwords.html">fst_find_stopwords()</a></code> can be used.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conllu_dev_q11_1_nltk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_rm_stop_punct.html">fst_rm_stop_punct</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">conllu_dev_q11_1</span><span class="op">)</span></span>
<span><span class="va">conllu_cb_bullying_iso</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_rm_stop_punct.html">fst_rm_stop_punct</a></span><span class="op">(</span><span class="va">conllu_cb_bullying</span>, <span class="st">"stopwords-iso"</span><span class="op">)</span></span></code></pre></div>
<p>The top 5 rows of the “conllu_bullying_iso” table are shown
below:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="5%">
<col width="5%">
<col width="12%">
<col width="3%">
<col width="5%">
<col width="4%">
<col width="2%">
<col width="2%">
<col width="38%">
<col width="6%">
<col width="3%">
<col width="2%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">paragraph_id</th>
<th align="right">sentence_id</th>
<th align="left">sentence</th>
<th align="left">token_id</th>
<th align="left">token</th>
<th align="left">lemma</th>
<th align="left">upos</th>
<th align="left">xpos</th>
<th align="left">feats</th>
<th align="left">head_token_id</th>
<th align="left">dep_rel</th>
<th align="left">deps</th>
<th align="left">misc</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">2</td>
<td align="left">kaveri</td>
<td align="left">kaveri</td>
<td align="left">NOUN</td>
<td align="left">N</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">3</td>
<td align="left">nsubj</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">3</td>
<td align="left">tönii</td>
<td align="left">töniä</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Jos lyö.</td>
<td align="left">2</td>
<td align="left">lyö</td>
<td align="left">lyödä</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">Jos tappelee.</td>
<td align="left">2</td>
<td align="left">tappelee</td>
<td align="left">tappella</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Kun nimitellään ja tönitään.</td>
<td align="left">2</td>
<td align="left">nimitellään</td>
<td align="left">nimitellä</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Tense=Pres|VerbForm=Fin|Voice=Pass</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Kun nimitellään ja tönitään.</td>
<td align="left">4</td>
<td align="left">tönitään</td>
<td align="left">töniä</td>
<td align="left">VERB</td>
<td align="left">V</td>
<td align="left">Mood=Ind|Tense=Pres|VerbForm=Fin|Voice=Pass</td>
<td align="left">2</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Now that you have data in CoNLL-U format, this pre-processed data is
ready for the analysis using <code>finnsurveytext</code> functions. For
more information on these, please review the other vignettes in this
package.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>The Office of Ombudsman for Children: Child Barometer 2016 [dataset].
Version 1.0 (2016-12-09). Finnish Social Science Data Archive
[distributor]. <a href="http://urn.fi/urn:nbn:fi:fsd:T-FSD3134" class="external-link uri">http://urn.fi/urn:nbn:fi:fsd:T-FSD3134</a></p>
<p>Finnish Children and Youth Foundation: Young People’s Views on
Development Cooperation 2012 [dataset]. Version 2.0 (2019-01-22).
Finnish Social Science Data Archive [distributor]. <a href="http://urn.fi/urn:nbn:fi:fsd:T-FSD2821" class="external-link uri">http://urn.fi/urn:nbn:fi:fsd:T-FSD2821</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adeline Clarke, Krista Lagus, Katja Laine, Maria Litova, Matti Nelimarkka, Joni Oksanen, Jaakko Peltonen, Tuukka Oikarinen, Jani-Matti Tirkkonen, Ida Toivanen, Maria Valaste, DARIAH-FI.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
