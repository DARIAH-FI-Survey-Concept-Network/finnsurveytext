<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="finnsurveytext">
<title>Tutorial3-Overview_of_Concept_Network_functions • finnsurveytext</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Tutorial3-Overview_of_Concept_Network_functions">
<meta property="og:description" content="finnsurveytext">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">finnsurveytext</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../../articles/ReadMe.html">ReadMe</a>
    <a class="dropdown-item" href="../../articles/web_only/Tutorial1-Prepare_CoNLL-U.html">Tutorial1-Prepare_CoNLL-U</a>
    <a class="dropdown-item" href="../../articles/web_only/Tutorial2-Data_exploration.html">Tutorial2-Data_exploration</a>
    <a class="dropdown-item" href="../../articles/web_only/Tutorial3-Overview_of_Concept_Network_functions.html">Tutorial3-Overview_of_Concept_Network_functions</a>
    <a class="dropdown-item" href="../../articles/web_only/Tutorial4-Analysis_and_config_of_Concept_Network_functions.html">Tutorial4-Further_analysis_and_configuration_of_Concept_Network_functions</a>
    <a class="dropdown-item" href="../../articles/web_only/Tutorial5-Demonstration_of_comparison_functions.html">Tutorial5-Demonstration_of_comparison_functions</a>
    <a class="dropdown-item" href="../../articles/web_only/Tutorial6-Example_of_analysis_of_an_open-ended_survey_question.html">Tutorial6-Example_of_analysis_of_an_open-ended_survey_question</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tutorial3-Overview_of_Concept_Network_functions</h1>
            
      
      
      <div class="d-none name"><code>Tutorial3-Overview_of_Concept_Network_functions.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This tutorial follows on from Tutorial 2 and guides you through
creation of a concept network plot. A concept network is a way to
visualise words which often occur together.</p>
<p>Our concept network function uses the TextRank algorithm which is a
graph-based ranking model for text processing. Vertices represent words
and co-occurrence between words is shown through edges. Word importance
is determined recursively (through the unsupervised learning TextRank
algorithm) where words get more weight based on how many words co-occur
and the weight of these co-occurring words.</p>
<p>To utilise the TextRank algorithm in <code>finnsurveytext</code>, we
use the <code>textrank</code> package. For further information on the
package, please see <a href="https://cran.r-project.org/web/packages/textrank/vignettes/textrank.html" class="external-link">this
documentation</a>. This package implements the TextRank and PageRank
algorithms. (PageRank is the algorithm that Google uses to rank
webpages.) You can read about the underlying Textrank algorithm <a href="https://web.eecs.umich.edu/~mihalcea/papers/mihalcea.emnlp04.pdf" class="external-link">here</a>
and about the PageRank algorithm <a href="https://www.sciencedirect.com/science/article/abs/pii/S016975529800110X" class="external-link">here</a>.</p>
<div class="section level3">
<h3 id="installation-of-package-">Installation of package.<a class="anchor" aria-label="anchor" href="#installation-of-package-"></a>
</h3>
<p>Once the package is installed, you can load the
<code>finnsurveytext</code> package as below: (Other required packages
such as <code>dplyr</code> and <code>stringr</code> will also be
installed if they are not currently installed in your environment.)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dariah-fi-survey-concept-network.github.io/finnsurveytext/">finnsurveytext</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="overview-of-functions">Overview of Functions<a class="anchor" aria-label="anchor" href="#overview-of-functions"></a>
</h3>
<p>The functions covered in this tutorial are in r/03_concept_network.R.
These are:</p>
<ol style="list-style-type: decimal">
<li><code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code></li>
<li><code><a href="../../reference/fst_cn_edges.html">fst_cn_edges()</a></code></li>
<li><code><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes()</a></code></li>
<li><code><a href="../../reference/fst_cn_plot.html">fst_cn_plot()</a></code></li>
<li><code><a href="../../reference/fst_concept_network.html">fst_concept_network()</a></code></li>
</ol>
</div>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>There are two sets of data files available within the package which
could be used in this tutorial. These files have been created following
the process demonstrated in Tutorial 1. The suffixes ‘iso’, ‘nltk’ and
‘snow’ refer to the types of stopwords which have been removed during
the data preparation activities.</p>
<div class="section level4">
<h4 id="child-barometer-data">1. Child Barometer Data<a class="anchor" aria-label="anchor" href="#child-barometer-data"></a>
</h4>
<ul>
<li>data/conllu_cb_bullying.rda</li>
<li>data/conllu_cb_bullying_iso.rda</li>
</ul>
</div>
<div class="section level4">
<h4 id="development-cooperation-data">2. Development Cooperation Data<a class="anchor" aria-label="anchor" href="#development-cooperation-data"></a>
</h4>
<ul>
<li>data/conllu_dev_q11_1.rda</li>
<li>data/conllu_dev_q11_1_nltk.rda</li>
<li>data/conllu_dev_q11_1_snow.rda</li>
<li>data/conllu_dev_q11_2.rda</li>
<li>data/conllu_dev_q11_2_nltk.rda</li>
<li>data/conllu_dev_q11_3.rda</li>
<li>data/conllu_dev_q11_3_nltk.rda</li>
</ul>
<p>You can read these in as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bullying</span> <span class="op">&lt;-</span> <span class="va">conllu_cb_bullying_iso</span></span>
<span><span class="va">q11_1</span> <span class="op">&lt;-</span> <span class="va">conllu_dev_q11_1_nltk</span></span>
<span><span class="va">q11_2</span> <span class="op">&lt;-</span> <span class="va">conllu_dev_q11_2_nltk</span></span>
<span><span class="va">q11_3</span> <span class="op">&lt;-</span> <span class="va">conllu_dev_q11_3_nltk</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bullying</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="5%">
<col width="4%">
<col width="11%">
<col width="3%">
<col width="4%">
<col width="4%">
<col width="2%">
<col width="7%">
<col width="36%">
<col width="5%">
<col width="3%">
<col width="2%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">paragraph_id</th>
<th align="right">sentence_id</th>
<th align="left">sentence</th>
<th align="left">token_id</th>
<th align="left">token</th>
<th align="left">lemma</th>
<th align="left">upos</th>
<th align="left">xpos</th>
<th align="left">feats</th>
<th align="left">head_token_id</th>
<th align="left">dep_rel</th>
<th align="left">deps</th>
<th align="left">misc</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">doc1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">2</td>
<td align="left">kaveri</td>
<td align="left">kaveri</td>
<td align="left">NOUN</td>
<td align="left">N,Sg,Nom</td>
<td align="left">Case=Nom|Number=Sing</td>
<td align="left">3</td>
<td align="left">nsubj</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">doc1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Jos kaveri tönii.</td>
<td align="left">3</td>
<td align="left">tönii</td>
<td align="left">tönia</td>
<td align="left">VERB</td>
<td align="left">V,Act,Ind,Pres,Sg3</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="odd">
<td align="left">doc1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Jos lyö.</td>
<td align="left">2</td>
<td align="left">lyö</td>
<td align="left">lyödä</td>
<td align="left">VERB</td>
<td align="left">V,Act,Ind,Pres,Sg3</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="even">
<td align="left">doc1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">Jos tappelee.</td>
<td align="left">2</td>
<td align="left">tappelee</td>
<td align="left">tapella</td>
<td align="left">VERB</td>
<td align="left">V,Act,Ind,Pres,Sg3</td>
<td align="left">Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
<tr class="odd">
<td align="left">doc2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Kun nimitellään ja tönitään.</td>
<td align="left">2</td>
<td align="left">nimitellään</td>
<td align="left">nimitellä</td>
<td align="left">VERB</td>
<td align="left">V,Pass,Ind,Pres</td>
<td align="left">Mood=Ind|Tense=Pres|VerbForm=Fin|Voice=Pass</td>
<td align="left">0</td>
<td align="left">root</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">doc2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Kun nimitellään ja tönitään.</td>
<td align="left">4</td>
<td align="left">tönitään</td>
<td align="left">tönitä</td>
<td align="left">VERB</td>
<td align="left">V,Pass,Ind,Pres</td>
<td align="left">Mood=Ind|Tense=Pres|VerbForm=Fin|Voice=Pass</td>
<td align="left">2</td>
<td align="left">conj</td>
<td align="left">NA</td>
<td align="left">SpaceAfter=No</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="functions">FUNCTIONS<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<div class="section level3">
<h3 id="concept-network---search-textrank-for-concepts">Concept Network - Search Textrank for Concepts<a class="anchor" aria-label="anchor" href="#concept-network---search-textrank-for-concepts"></a>
</h3>
<p><code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code></p>
<p>This function is used to find words which are related to a list of
provided terms. It utilises the <code>textrank_keywords()</code>
function which is part of the <code>textrank</code> package.</p>
<p>This function goes through the following process:</p>
<ol style="list-style-type: decimal">
<li>separates the search string into individual terms</li>
<li>applies the <code>textrank_keywords()</code> function which finds
n-grams in the text that occur multiple times</li>
<li>finds all pairs of words included in these common ngrams</li>
<li>filters the pairs so that at least one of the pair is a searched
term.</li>
</ol>
<p>The function <code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code> is demonstrated below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bullying_concepts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_search.html">fst_cn_search</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bullying</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kiusata, lyöminen, lyödä, potkia"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">q11_2_concepts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_search.html">fst_cn_search</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">conllu_dev_q11_2_nltk</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kehitysmaa, auttaa, pyrkiä, maa, ihminen"</span>,</span>
<span>  pos_filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ADV"</span>, <span class="st">"ADJ"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">q11_3_concepts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_search.html">fst_cn_search</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">conllu_dev_q11_3_nltk</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The resulting dataframe is formatted as below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">q11_3_concepts</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="47%">
<col width="8%">
<col width="7%">
<col width="21%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">keyword</th>
<th align="right">ngram</th>
<th align="right">freq</th>
<th align="left">word1</th>
<th align="left">word2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">nälänhätä-sota</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="left">nälänhätä</td>
<td align="left">sota</td>
</tr>
<tr class="even">
<td align="left">köyhyys-nälänhätä</td>
<td align="right">2</td>
<td align="right">6</td>
<td align="left">köyhyys</td>
<td align="left">nälänhätä</td>
</tr>
<tr class="odd">
<td align="left">nälänhätä-huono</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">nälänhätä</td>
<td align="left">huono</td>
</tr>
<tr class="even">
<td align="left">sota-nälänhätä-puhdas-vesi-puute</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="left">sota</td>
<td align="left">nälänhätä</td>
</tr>
<tr class="odd">
<td align="left">sota-nälänhätä-puhdas-vesi-puute</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="left">nälänhätä</td>
<td align="left">puhdas</td>
</tr>
<tr class="even">
<td align="left">sota-nälänhätä-puhdas-vesi-puute</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="left">puhdas</td>
<td align="left">vesi</td>
</tr>
<tr class="odd">
<td align="left">sota-nälänhätä-puhdas-vesi-puute</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="left">vesi</td>
<td align="left">puute</td>
</tr>
<tr class="even">
<td align="left">sota-köyhyys</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">sota</td>
<td align="left">köyhyys</td>
</tr>
<tr class="odd">
<td align="left">ilmastonmuutos-nälänhätä</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">ilmastonmuutos</td>
<td align="left">nälänhätä</td>
</tr>
<tr class="even">
<td align="left">sota-nälänhätä</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">sota</td>
<td align="left">nälänhätä</td>
</tr>
</tbody>
</table>
<p>To run <code>fst_cn_search</code>, we provide the following arguments
to the function:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code> which is output from data preparation, prepared
data in CoNLL-U format, such as the output of
<code>fst_prepare_connlu()</code>.</li>
<li>
<code>concepts</code> is a string of concept terms to search for,
separated by commas.</li>
<li>
<code>relevant_pos</code> is a list of UPOS tags for inclusion,
default is c(“NOUN”, “VERB”, “ADJ”, “ADV”).</li>
</ol>
</div>
<div class="section level3">
<h3 id="concept-network---get-textrank-edges">Concept Network - Get Textrank Edges<a class="anchor" aria-label="anchor" href="#concept-network---get-textrank-edges"></a>
</h3>
<p><code><a href="../../reference/fst_cn_edges.html">fst_cn_edges()</a></code></p>
<p>The Get Edges function runs the search function,
<code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code> and then filters for edges (pairs of
co-occurring words where one is a concept word) which are larger than
the threshold (occurring enough times). The resulting dataframe is
simplified in preparation for plotting.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bullying_edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_edges.html">fst_cn_edges</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bullying</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kiusata, lyöminen, lyödä, potkia"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">q11_2_edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_edges.html">fst_cn_edges</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">conllu_dev_q11_2_nltk</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kehitysmaa, auttaa, pyrkiä, maa, ihminen"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  norm <span class="op">=</span> <span class="st">"number_resp"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">q11_3_edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_edges.html">fst_cn_edges</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">conllu_dev_q11_3_nltk</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The dataframe has a simplified format from the
<code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code> results, with only columns “to”, “from” and
“n” which indicates the number of occurrences.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">q11_2_edges</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">from</th>
<th align="left">to</th>
<th align="right">co_occurrence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">apu</td>
<td align="left">tarvitsla</td>
<td align="right">0.00882</td>
</tr>
<tr class="even">
<td align="left">asua</td>
<td align="left">ihminen</td>
<td align="right">0.00662</td>
</tr>
<tr class="odd">
<td align="left">auttaa</td>
<td align="left">apu</td>
<td align="right">0.00882</td>
</tr>
<tr class="even">
<td align="left">auttaa</td>
<td align="left">kehitysmaa</td>
<td align="right">0.07280</td>
</tr>
<tr class="odd">
<td align="left">auttaa</td>
<td align="left">köys</td>
<td align="right">0.00662</td>
</tr>
<tr class="even">
<td align="left">ihminen</td>
<td align="left">auttaa</td>
<td align="right">0.00551</td>
</tr>
<tr class="odd">
<td align="left">kehitysmaa</td>
<td align="left">asua</td>
<td align="right">0.00992</td>
</tr>
<tr class="even">
<td align="left">kehitysmaa</td>
<td align="left">auttaa</td>
<td align="right">0.01650</td>
</tr>
<tr class="odd">
<td align="left">kehitysmaa</td>
<td align="left">ihminen</td>
<td align="right">0.01430</td>
</tr>
<tr class="even">
<td align="left">kehitysmaa</td>
<td align="left">kehittyä</td>
<td align="right">0.00662</td>
</tr>
</tbody>
</table>
<p>The arguments are the same as for <code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code> plus
the <code>threshold</code>.</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code> which is output from data preparation, prepared
data in CoNLL-U format, such as the output of
<code>fst_prepare_connlu()</code>.</li>
<li>
<code>concepts</code> is a string of concept terms to search for,
separated by commas.</li>
<li>
<code>threshold</code> is the minimum number of occurrences
threshold for ‘edge’ between a concept term and other word, default is
NULL.</li>
<li>
<code>norm</code> is the method for normalising the data. Valid
settings are <code>'number_words'</code> (the number of words in the
responses, default), <code>'number_resp'</code> (the number of
responses), or <code>NULL</code> (raw count returned). Normalisation
occurs <strong>after</strong> the threshold (if it exists) is
applied.</li>
<li>
<code>pos_filter</code> is a list of UPOS tags for inclusion,
default is <code>NULL</code>.</li>
</ol>
</div>
<div class="section level3">
<h3 id="concept-network---get-textrank-nodes">Concept Network - Get Textrank Nodes<a class="anchor" aria-label="anchor" href="#concept-network---get-textrank-nodes"></a>
</h3>
<p><code><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes()</a></code></p>
<p>This function runs the <code>textrank_keywords()</code> function
which is part of the <code>textrank</code> package and returns a
dataframe containing relevant lemmas and their associated PageRank.</p>
<p>It is demonstrated as follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bullying_nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">bullying</span>, edges <span class="op">=</span> <span class="va">bullying_edges</span><span class="op">)</span></span>
<span><span class="va">q11_2_nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">conllu_dev_q11_2_nltk</span>, edges <span class="op">=</span> <span class="va">q11_2_edges</span><span class="op">)</span></span>
<span><span class="va">q11_3_nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">conllu_dev_q11_3_nltk</span>, edges <span class="op">=</span> <span class="va">q11_3_edges</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">q11_2_nodes</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">lemma</th>
<th align="right">pagerank</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">auttaa</td>
<td align="right">0.0799940</td>
</tr>
<tr class="even">
<td align="left">pyrkiä</td>
<td align="right">0.0358074</td>
</tr>
<tr class="odd">
<td align="left">kehitysmaa</td>
<td align="right">0.0768148</td>
</tr>
<tr class="even">
<td align="left">parantaa</td>
<td align="right">0.0223635</td>
</tr>
<tr class="odd">
<td align="left">ihminen</td>
<td align="right">0.0250921</td>
</tr>
<tr class="even">
<td align="left">apu</td>
<td align="right">0.0089812</td>
</tr>
<tr class="odd">
<td align="left">olo</td>
<td align="right">0.0123289</td>
</tr>
<tr class="even">
<td align="left">asua</td>
<td align="right">0.0030227</td>
</tr>
<tr class="odd">
<td align="left">kehittyä</td>
<td align="right">0.0059800</td>
</tr>
<tr class="even">
<td align="left">tarvitsla</td>
<td align="right">0.0034266</td>
</tr>
</tbody>
</table>
<p><code><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes()</a></code> requires the following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code> which is output from data preparation, prepared
data in CoNLL-U format, such as the output of
<code>fst_prepare_connlu()</code>.</li>
<li>
<code>edges</code> is the output from
<code><a href="../../reference/fst_cn_edges.html">fst_cn_edges()</a></code>.</li>
<li>
<code>pos_filter</code> is a list of UPOS tags for inclusion,
default is <code>NULL</code>.</li>
</ol>
</div>
<div class="section level3">
<h3 id="plot-concept-network">Plot Concept Network<a class="anchor" aria-label="anchor" href="#plot-concept-network"></a>
</h3>
<p><code><a href="../../reference/fst_cn_plot.html">fst_cn_plot()</a></code></p>
<p>This function takes the output of the previous functions and plots
the concept network. Edges between words in the plot show the number of
occurrences with thicker and more opaque edges showing more occurrences.
Similarly, the size of the word circle indicates the PageRank with
higher PageRank resulting in a larger circle. Concept words are coloured
red and other terms are black.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_cn_plot.html">fst_cn_plot</a></span><span class="op">(</span></span>
<span>  edges <span class="op">=</span> <span class="va">bullying_edges</span>,</span>
<span>  nodes <span class="op">=</span> <span class="va">bullying_nodes</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kiusata, lyöminen"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Bullying Data CN"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>Recall that for <code>q11_2_edges</code> we have set the
<code>threshold</code> as 5.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_cn_plot.html">fst_cn_plot</a></span><span class="op">(</span></span>
<span>  edges <span class="op">=</span> <span class="va">q11_2_edges</span>,</span>
<span>  nodes <span class="op">=</span> <span class="va">q11_2_nodes</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kehitysmaa, auttaa, pyrkiä, maa, ihminen"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<p>Recall that for <code>q11_3_edges</code> we have set the
<code>threshold</code> as 2. This is why there are fewer words included
in the plot despite more words available (including stopwords) in this
data.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_cn_plot.html">fst_cn_plot</a></span><span class="op">(</span></span>
<span>  edges <span class="op">=</span> <span class="va">q11_3_edges</span>,</span>
<span>  nodes <span class="op">=</span> <span class="va">q11_3_nodes</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p>As <code><a href="../../reference/fst_cn_plot.html">fst_cn_plot()</a></code> uses results from the previous
functions, it has 4 arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>edges</code> is the output of
<code><a href="../../reference/fst_cn_edges.html">fst_cn_edges()</a></code>.</li>
<li>
<code>nodes</code> is the output of <code><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes()</a></code>
</li>
<li>
<code>concepts</code> is a list of terms which have been searched
for, separated by commas.</li>
<li>
<code>title</code> is an optional title for plot, default is
<code>NULL</code> and a generic title, (‘Textrank extracted keyword
occurrences’) will be used.</li>
</ol>
</div>
<div class="section level3">
<h3 id="plot-concept-network-1">Plot Concept Network<a class="anchor" aria-label="anchor" href="#plot-concept-network-1"></a>
</h3>
<p><code><a href="../../reference/fst_concept_network.html">fst_concept_network()</a></code></p>
<p>If you don’t want to run all of the individual functions,
<code><a href="../../reference/fst_cn_search.html">fst_cn_search()</a></code>, <code><a href="../../reference/fst_cn_edges.html">fst_cn_edges()</a></code>,
<code><a href="../../reference/fst_cn_nodes.html">fst_cn_nodes()</a></code>, and <code><a href="../../reference/fst_cn_plot.html">fst_cn_plot()</a></code>, you can run
them all within the one function,
<code><a href="../../reference/fst_concept_network.html">fst_concept_network()</a></code>.</p>
<p>This function is run as follows:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_1</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"elintaso, köyhä, ihminen"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_1</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"elintaso, köyhä, ihminen"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-2.png" width="576"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_2</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kehitysmaa, auttaa, pyrkiä, maa, ihminen"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-3.png" width="576"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_2</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kehitysmaa, auttaa, pyrkiä, maa, ihminen"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-4.png" width="576"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_2</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kehitysmaa, auttaa, pyrkiä, maa, ihminen"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-5.png" width="576"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_3</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-6.png" width="576"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">q11_3</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"köyhyys, nälänhätä, sota, ilmastonmuutos, puute"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-7.png" width="576"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/fst_concept_network.html">fst_concept_network</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bullying</span>,</span>
<span>  concepts <span class="op">=</span> <span class="st">"kiusata, lyöminen"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Concept Network of Bullying Data"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial3-Overview_of_Concept_Network_functions_files/figure-html/unnamed-chunk-12-8.png" width="576"></p>
<p>The arguments are:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code> which is output from data preparation, prepared
data in CoNLL-U format, such as the output of
<code>fst_prepare_connlu()</code>.</li>
<li>
<code>concept</code> is a string of concept terms to search for,
separated by commas.</li>
<li>
<code>threshold</code> is the minimum number of occurrences
threshold for ‘edge’ between a concept term and other word, default is
NULL.</li>
<li>
<code>norm</code> is the method for normalising the data. Valid
settings are <code>'number_words'</code> (the number of words in the
responses, default), <code>'number_resp'</code> (the number of
responses), or <code>NULL</code> (raw count returned). Normalisation
occurs <strong>after</strong> the threshold (if it exists) is
applied.</li>
<li>
<code>pos_filter</code> is a list of UPOS tags for inclusion,
default is <code>NULL</code>.</li>
<li>
<code>title</code> is an optional title for plot, default is
<code>NULL</code> and a generic title, (‘Textrank extracted keyword
occurrences’) will be used.</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>This tutorial ran you through the functions used to create Concept
Networks which are included in <code>finnsurveytext</code>. A concept
network visualises word importance and co-occurrence between words.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>The Office of Ombudsman for Children: Child Barometer 2016 [dataset].
Version 1.0 (2016-12-09). Finnish Social Science Data Archive
[distributor]. <a href="http://urn.fi/urn:nbn:fi:fsd:T-FSD3134" class="external-link uri">http://urn.fi/urn:nbn:fi:fsd:T-FSD3134</a></p>
<p>Finnish Children and Youth Foundation: Young People’s Views on
Development Cooperation 2012 [dataset]. Version 2.0 (2019-01-22).
Finnish Social Science Data Archive [distributor]. <a href="http://urn.fi/urn:nbn:fi:fsd:T-FSD2821" class="external-link uri">http://urn.fi/urn:nbn:fi:fsd:T-FSD2821</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Adeline Clarke, Krista Lagus, Katja Laine, Maria Litova, Matti Nelimarkka, Joni Oksanen, Jaakko Peltonen, Tuukka Oikarinen, Jani-Matti Tirkkonen, Ida Toivanen, Maria Valaste, DARIAH-FI.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
